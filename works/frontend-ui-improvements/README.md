# ゲーム用ステータス可視化・計算ツール

スプレッドシートで管理されていたゲーム内数値を、  
「手動計算・静的グラフ」から脱却させるために開発・改善を行った  
**Web ベースのステータス可視化・計算ツール**です。

---

## 概要

開発以前は、以下のような運用が行われていました。

- スプレッドシートで数値を管理
- グラフを画像として書き出し、ブログ等に貼り付けて利用
- 条件変更のたびに再計算・再作成が必要
- 比較や試行錯誤がしづらい

これらの課題を解消するため、  
**条件を選択するだけで数値計算とグラフ表示を行えるツール**として設計・改善されています。

---

## 開発・改善における立ち位置

本ツールは、ベースとなる実装を別作者が担当しつつ、  
開発段階から仕様や構成の相談に参加しました。

その後、

- 数値の計算ロジックの一部を実装
- リリース後の UI 改善・挙動修正・データ更新対応を継続的に担当

という形で関わっています。

特にリリース後は、  
**実際の利用状況を見ながらの改善・保守を一貫して担当**しました。

---

## 主な機能

- ステータス条件の選択による数値計算
- 複数条件の同時比較
- グラフによる成長・性能の可視化
- カード・キャラクター情報の選択 UI
- 設定内容に応じた自動再計算

---

## 実装上の主な改善点

### 選択 UI の再設計（キャラ名 → カード名）

初期設計では、

- キャラクター名で絞り込み
- その後カードを選択

という導線を前提としていました。

しかし、リリース後の利用状況から、

- カード名の方が認知されている
- カード画像から探したいという要望がある

といった実態が分かり、  
**既存仕様を壊さずに選択の自由度を上げる改善**を行いました。

#### 対応内容

- 未選択状態ではカード一覧をすべて表示
- カード名が 1 つに絞られた場合は自動選択
- 画像付きプルダウンによる視認性向上
- 選択順を固定しない設計への変更

この修正では、  
UI・状態管理・データ取得ロジックが複数ファイルにまたがっており、  
影響範囲を確認しながら段階的に修正しています。

---

### 未選択状態の扱い整理（null → undefined）

連動セレクトの挙動安定化のため、

- 候補リストに null を混ぜる設計を廃止
- 未選択は value を持たない状態（undefined）で統一

という方針に変更しました。

これにより、

- セレクトの判定ズレ
- 表示・自動選択ロジックの不整合

を解消しています。

---

### 自動補完ロジックの追加

カード名を選択した際に、

- 対応する情報が一意に定まる場合
- 未選択の項目がある場合

は、  
**関連項目を自動で補完する挙動**を追加しました。

「手数を減らしつつ、選択の自由度は落とさない」ことを意識した改善です。

---

## 使用技術

- React（関数コンポーネント / Hooks）
- TypeScript（null / undefined を意識した型設計）
- 連動セレクトを含む状態管理
- データ駆動型 UI 設計（CSV ベース）
- 既存コードを壊さない段階的リファクタリング

---

## 実装上で特に苦戦した点

### 選択 UI の仕様変更と状態管理

本ツールでは、  
**キャラクター名 → カード名**という選択 UI を採用しています。

初期設計では、

- キャラクター数の方が少ない
- 先にキャラを選んでからカードを絞り込む方が自然

という前提で実装されていました。

しかし、リリース後に、

- カード名の方がユーザーにとって認知度が高い
- カード画像から探したいという要望がある

ことが分かり、  
**選択順を固定しない UI への変更**が必要になりました。

この変更では、

- どの選択がどの状態に依存しているか
- どこで state が更新され、どこで参照されているか

を正確に把握しないと、
既存の自動絞り込みや計算ロジックが壊れてしまいます。

そのため、

- UI コンポーネント
- 状態管理ロジック
- データ参照処理

を行き来しながら、
影響範囲を確認して修正を進めました。

---

### 未選択状態（null / undefined）の扱い整理

連動セレクトの実装では、
「未選択」をどう表現するかが大きな課題でした。

当初は、

- 候補配列の先頭に null を混ぜる
- null を「未選択」の意味として扱う

という設計でしたが、

- React コンポーネント側での判定が複雑になる
- value が null の場合に挙動が不安定になる

といった問題が発生しました。

そこで、

- 候補データには null を含めない
- 未選択状態は value を持たない（undefined）状態で統一

という設計に変更しています。

この修正は、

- データ取得処理
- セレクト UI
- 自動選択・補完ロジック

すべてに影響するため、
一箇所ずつ確認しながら慎重に変更しました。

---

### 自動補完・自動選択ロジックの追加

ユーザー操作を減らすため、

- ある選択から他の項目が一意に定まる場合
- かつ、まだ未選択の項目がある場合

には、自動で補完・選択される挙動を追加しています。

ただし、

- 勝手に選ばれすぎない
- ユーザーが自由に選び直せる

という点も重要だったため、

- 未選択時のみ自動セットする
- 明示的に選択されている場合は上書きしない

といった条件分岐を入れています。

この調整では、
「UI の使いやすさ」と「状態の一貫性」のバランスを取るのに
特に苦戦しました。

---

## ChatGPT の活用について（補足）

本プロジェクトが **初めての Web 開発経験**だったこともあり、

- React の状態管理
- TypeScript の型エラー
- UI と計算ロジックの責務分離

を同時に理解する必要がありました。

そのため、

- 既存コードを関数単位で分解して説明させる
- 「この state はどこで使われているか」を確認する
- エラー内容から修正対象を絞り込む

といった形で、  
理解を深めながら段階的に修正しています。

この経験を通して、

- UI 変更がどこまで影響するかを考える視点
- 状態管理を前提にした設計の重要性

を実感し、  
現在では HTML / CSS / JavaScript ベースの実装であれば、
よりスムーズに構築できるようになっています。

---

## 成果・効果（補足）

- 実運用に耐える UI 改善を継続的に実施
- React / TypeScript による状態管理の基礎を習得
- 複数ファイルにまたがる修正を安全に行う経験を獲得
- 以降の Web 開発における土台となるプロジェクト
