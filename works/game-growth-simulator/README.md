# ゲーム育成シミュレーター（静的攻略ツール）

## ① プロジェクト概要
ゲームの育成要素を分析・攻略するための **静的Webツール**。プレイヤーが「1〜3ターン目の行動が60ターン後にどう影響するか」を確認できるよう、**全ターンの行動をシミュレートできるUIとロジック**を備えています。

対象は、ゲーム攻略を共同で行うプレイヤー（友人グループなど）。ブラウザ上で即座に開ける「軽量ツール」として設計し、ネットワーク通信やサーバーを一切使用せず、アップデート直後から活用できるようにしました。

---

## ② 使用技術
- **言語 / ライブラリ**
  - HTML5 / CSS3 / Vanilla JavaScript  
- **データ永続化**
  - `localStorage` に設定・シミュレーション結果を保存  
- **UI構成**
  - CSS Grid・Flexbox を用いたレスポンシブ対応  
- **アプリ構成**
  - 完全クライアントサイドの SPA（静的HTMLで動作）  
- **JSON入出力**
  - 設定や盤面の共有を可能にするインポート／エクスポート機能  

---

## ③ 工夫した点・実装の特徴

### ■ 長期依存を扱うシミュレーション設計
- 各ターンを `tier-month-half` 形式で一意管理し、全ターンを時系列で処理することで **序盤の行動が終盤に影響する**仕組みを再現。
- 「源泉の残量」や「温泉チケットの獲得・使用」など、60ターンを通して変化するリソースを自動追跡。

### ■ ゲームUIに寄せた軽量レイアウト
- 実際のゲーム画面に近い3パネル構成（ジュニア／クラシック／シニア）。
- 各ターンの操作をグリッド上に直感的に配置。
- CSS変数でテーマカラーを一元管理し、軽量でも視認性の高いデザイン。

### ■ 確率分布による期待値計算
- DP（動的計画法）＋トリム平均で「上振れ期待人数」を算出。
- 上振れ率スライダーで確率分布を動的に反映し、感覚的だった「上振れ運」を数値として視覚化。

### ■ アップデートへの即応性
- 細かい説明を省き、UI操作だけで理解できる構成。
- シナリオや係数の更新にも即対応できるよう、定数やプリセットをJSONで独立管理。

---

## ④ 技術的な学び・課題解決

### ● 課題：長期ターンの整合性維持
- 期・月・ターンを別管理していた際にズレが発生。
- → 各ターンを一意キー化して配列に直列化し、順次処理で整合性を確保。

### ● 課題：確率分布の誤差処理
- トリム処理時の丸め誤差で期待値がずれた。
- → `Map`で分布を保持し、ソート済み配列を用いた厳密平均計算で安定化。

### ● 課題：UI操作と内部ロジックの競合
- 手動変更と自動再計算が競合し、値が上書きされるバグ。
- → 手動更新時に「上書きフラグ」を設定し、再計算ループを制御。

---

## ⑤ 成果・効果
- 実際のユーザー（友人プレイヤー）からは「**アップデート初日でも動く**」「**UIが直感的**」との評価。
- 共有JSONを用いることで、**同一盤面を他プレイヤーと再現可能**。
- データロードや通信が不要なため、オフラインでも即起動。
- 攻略検証の時間を大幅に短縮できた。

---

> 本ツールは「**サクッと作ること**」を意識し、依存ライブラリを排した軽量な実装と、ゲームUIに寄せた直感的な操作性を両立しています。
