# Puretomo Avatar Bazzar Assistant

## プロジェクト概要
オンラインゲーム「チョコットランド」の公式バザー（アバターオークション）は検索機能がシンプルで、ステータス差や価格の妥当性を比較しにくいという課題がありました。本ツールは公式サイトで公開されているアバター取引データを自動取得・集計し、ユーザーが自身の所持アバターと比べながらお得なアバターを見つけやすくすることを目的としています。主な利用者は同じゲームを遊ぶ友人グループで、直感的な購入判断を支援します。

## 使用技術
### バックエンド
- Node.js（Google Cloud Functions 上で稼働）
- GitHub REST API を利用した自動コミット更新
- p-limit で並列数を制御し、node-fetch で HTTP 通信
- 取引データや価格履歴を JSON 形式で管理

### フロントエンド
- HTML / CSS / JavaScript のシンプル構成
- Chart.js と moment.js による価格推移グラフ描画
- localStorage でユーザー設定と所持アバター情報を保存
- GitHub Pages または Cloudflare Pages で静的ホスティング

## 特色・工夫
- **自動データ更新のクラウドパイプライン**: 定期実行の Cloud Functions で取引データを取得し、GitHub API 経由で JSON を自動更新。PC を起動していなくても最新データを維持できます。
- **安定した並列処理とリトライ設計**: p-limit で同時リクエスト数を制御し、タイムアウト時に自動リトライ。大量データでも処理が中断しない堅牢性を確保しました。
- **見やすく使いやすい UI**: 所持アバターを登録した上で「未所持」「上位性能」「価格上昇中」などの条件で絞り込み可能。価格推移を折れ線グラフで可視化し、トレンドを直感的に把握できます。
- **独自スコアリングとデータ圧縮**: ステータスをスコア化してコスパ指標を算出。価格履歴 JSON は重複や変化の少ない部分を圧縮し、長期保存でも軽量に保ちました。

## 技術的な学び・課題解決
- **初めてのクラウド運用**: ローカルスクリプトを Cloud Functions 化し、環境変数管理・実行制限・ログ設計を習得。クラウド運用を意識した構造に改善しました。
- **API 信頼性とデータ整合性**: p-limit とリトライロジックで大量の非同期リクエストを安定化。GitHub API で複数ファイルを 1 コミットにまとめて更新する仕組みも整備しました。
- **ユーザー目線のデータ設計**: ゲーム内部コードや略称を CSV マスタで日本語に変換し、誰でも理解できる UI に反映。技術的処理を「使いやすさ」に落とし込む設計力を高めました。
- **更新頻度とコストのバランス**: Cloud Functions の実行コストを踏まえて更新間隔を 30 分ごとに制限し、リアルタイム性と運用コストの折り合いを取りました。
- **リージョン構成とコスト最適化**: Functions と GitHub API 間の海外通信で想定以上のコストが発生。次回以降は同一リージョン内で完結する Firestore などのデータストアを採用し、遅延と課金を最適化する方針です。

## 成果・効果
- 友人ユーザーから「公式サイトより圧倒的に分かりやすい」「探す時間が 1/10 になった」と好評。
- データ取得から可視化までのフルスタック構成を個人で実現し、クラウド自動化の基礎を習得。
- 定期更新により常に最新の市場情報を取得でき、アバター選定の効率を大幅に改善しました。
- コスト意識を踏まえた運用設計を経験し、実運用レベルの設計判断力を獲得しました。

© 2025 Puretomo Bazzar Assistant
